<div class="flex flex-col m-2">
    <div class="flex gap-3 items-center">
        <app-avatar-photo [imageLink]="user.profileImagePath"></app-avatar-photo>

        <div class="flex flex-col w-full">
            <span class="font-semibold mb-1">{{ user.fullName }}</span>

            <div class="relative w-full">
                <mat-form-field class="w-full">
                    <mat-label class="max-feed-sm:font-extralight">Tell me more</mat-label>

                    <textarea #comment maxlength="300" type="text"
                              [formControl]="contentControl"
                              [cdkTextareaAutosize]="true"
                              matInput placeholder="I think...">
                        </textarea>

                    <button mat-icon-button matSuffix (click)="this.isOpened = !this.isOpened;">
                        <mat-icon>mood</mat-icon>
                    </button>

                    <button mat-icon-button matSuffix (click)="isAttachingImagesOpened = !isAttachingImagesOpened">
                        <mat-icon>image</mat-icon>
                    </button>

                    <mat-hint align="end">{{ comment.value.length }} / 300</mat-hint>
                </mat-form-field>

                @if (isOpened) {
                    <emoji-mart
                            class="picker"
                            color="#0df4e2"
                            set="twitter"
                            title="Pick your emojiâ€¦"
                            emoji="point_up"
                            [isNative]="true"
                            (emojiSelect)="emojiSelected($event)"
                            [darkMode]="true">
                    </emoji-mart>
                }
            </div>

            @if (comment.value.length !== 0 || attachedImagesLength !== 0) {
                <div>
                    <button mat-button color="primary" type="button">
                        <mat-icon>send</mat-icon>
                        Comment
                    </button>
                </div>
            }
        </div>
    </div>

    <app-drop-image [isAttachingImagesOpened]="isAttachingImagesOpened"
                    (attachedImagesLength)="attachedImagesLength = $event">
    </app-drop-image>
</div>
